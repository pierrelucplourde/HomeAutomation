@model HomeAutomation.DataAccess.Entity.Component

@{
    ViewBag.Title = "Detail";
    ViewBag.Id = "DetailComponent" + Model.Id;
}

<h2>Details</h2>

<div>
    <span>Name :@Model.Name</span><br />
    <span>Description :@Model.Description</span><br />
    <span>IP Adress :@Model.Device.IPAddress</span><br />
    <span>Type :@Model.Type.Category</span><br />
    <span>Compression :@Model.Compression</span><br />
    <span>Interval :@Model.Interval</span><br />
    <span>MinThreshold :@Model.MinThreshold</span><br />
    <span>MaxThreshold :@Model.MaxThreshold</span><br />

    <span>Current Value :@Model.CurrentValue</span><br />
    <span>Last Contact :@Model.LastContact</span><br />
    @if (Model.Options != null) {
        foreach (var key in @Model.Options.Keys) {
            if (key == "Password") {
        <span>@key : *************</span><br />
            } else { 
        <span>@key :@Model.Options[key]</span><br />
            }
        }
    }

</div>



<div id="chart_div_@Model.Id" style="height: 600px;"></div>

@section PageScript{
    <script type="text/javascript">
        //alert("Test");
        
        

            $.ajax({
                url: "/Component/GetDataTableJson/@Model.Id",
                dataType: "json",
                success: function (json) {
                    //alert(json);
                    // Create our data table out of JSON data loaded from server.
                    var data = new google.visualization.DataTable(json);

                    var options = {
                        title: 'History'
                    };

                    // Instantiate and draw our chart, passing in some options.
                    var chart = new google.visualization.LineChart(document.getElementById('chart_div_@Model.Id'));
                    chart.draw(data, options);
                    
                }
            });

          
    </script>
    
}